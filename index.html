<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Imovel Guide</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

  <link rel="stylesheet" type="text/css" href="./assets/css/style.css" media="screen">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.48.5/html2canvas.min.js"></script>

  <script src="script.js"></script>
</head>

<body>

  <nav class="navbar navbar-expand-lg navbar-light backgroundColorNav" style="padding: 8px 10px 12px;">
    <div class="container-fluid">
      <img src="./assets/images/Logo.png" width="10%" height="10%"
        style="padding-right: 40px; min-height: 60px; min-width: 170px;">
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item textNav ">
            <a class="nav-link" href="#">Condomínios</a>
          </li>
          <li class="nav-item textNav ">
            <a class="nav-link" href="#">Fórum</a>
          </li>
          <li class="nav-item textNav ">
            <a class="nav-link" href="#">Guia</a>
          </li>
          <li class="nav-item textNav ">
            <a class="nav-link" href="#">Artigos</a>
          </li>
          <li class="nav-item textNav ">
            <a class="nav-link" href="#">Ferramentas</a>
          </li>
          <li class="nav-item textNav ">
            <a class="nav-link" href="#" style="padding-left: 650px;">Cotar Imóvel</a>
          </li>
          <li class="nav-item textNav ">
            <a class="nav-link" href="#">Planos</a>
          </li>
          <li class="nav-item textNav ">
            <a class="nav-link" href="#">Entrar</a>
          </li>
        </ul>
        <form class="d-flex" style="padding-right: 50px;" role="search">
          <button class="btn btn-outline-success button btn-sign-in" type="submit">CADASTRE-SE</button>
        </form>
      </div>
    </div>
  </nav>
  <div class="container">
    <div class="grid">
      <div class="profiles" style="min-height: 10%;
      min-width: 10%;">
        <div class="profile" style="padding-left: 5px;">
          <img src="./assets/images/image1.jpg" class="profileImages" alt="Profile image 1">
          <div class="profileText">
            <h2 class="profileName">Nome Corretora 1</h2>
            <p>3.000 pontos</p>
            <div class="fone" id="fone1" onclick="clicked_on(1,document.getElementById('fone1'))">Ver telefone</div>
          </div>
        </div>
        <div class="profile" style="padding-top: 15px">
          <img src="./assets/images/image2.jpg" class="profileImages" alt="Profile image 2">
          <div class="profileText" style="padding-right: 18px;">
            <h2 class="profileName">Nome Corretor 2</h2>
            <p>1.260 pontos</p>
            <div class="fone" id="fone2" onclick="clicked_on(2,document.getElementById('fone2'))">Ver telefone</div>
          </div>
        </div>
      </div>
      <div class="message">
        <h2 style="color: #1B2653;">Mande uma mensagem:</h2>
        <input class="inputInstructions" type="text" id="CPF" name="CPFInput" placeholder="Digite seu CPF"
          style="margin-top: 5px;">
        <input class="inputInstructions" type="text" id="phoneInput" placeholder="Digite seu telefone">
        <input class="teste" type="text" id="messageInput" name="textMessage" placeholder="Digite o assunto"
          style="height: 130px; white-space: pre-line; overflow: hidden;">
        <button type="button" id="sendingMessage"
          style="border-radius: 10px; margin-top: 15px; width: 180px; height: 40px; background-color: #FE6613; color: white;">Enviar
          mensagem</button>
      </div>
      <div class="rule">
        <h1 style="color: #1B2653;">Regra de 3</h1>
        <div class="ruleContainer">
          <div class="rule-container" style="margin-top: 80px;">
            <input class="ruleInputs" type="number" id="num1" placeholder="60">
            <div class="ruleBars"></div>
            <input class="ruleInputs" type="number" id="num2" placeholder="100">
            <input class="ruleInputs" type="number" id="num3" placeholder="30">
            <div class="ruleBars"></div>
            <input class="ruleInputs" type="number" id="result" placeholder="50">
          </div>
        </div>
        <div class="resultButton">
          <button id="calcular"
            style="border-radius: 10px; margin-top: 15px; width: 110px; height: 40px; background-color: #FE6613; color: white; margin-top: 95px;">Calcular</button>
        </div>
      </div>
    </div>
  </div>
  <div class="modal" id="myModal">
    <hr class="modal-line">
    <span class="close">&times;</span>
    <img class="modal-content" id="modalImage">
  </div>
  <div class="container">
    <div class="grid">
      <div class="imageContainer">
        <img src="./assets/images/Image3.png" class="imageGrid clickableImage" alt="Imagem clicável">
        <button type="button" id="openModalButton"
          style="border-radius: 10px; margin-top: 15px; width: 100%; height: 40px; background-color: #FE6613; color: white;">
          ABRIR IMAGEM NO MODAL
        </button>
      </div>

      <div class="imageDownload" onclick="capturarConteudo()">
        <img src="./assets/images/Image3.png" class="imageGrid">
        <button type="button" id="openModalButton"
        style="border-radius: 10px; margin-top: 15px; width: 60%; height: 40px; background-color: #FE6613; color: white; display: block; margin-left: auto; margin-right: auto;">
        Download
      </button>      
      </div>
      <div class="video">
        <div class="zoom-container">
          <img id="zoomImage" src="./assets/images/Image3.png" class="imageGrid">
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="grid">
    </div>
  </div>

  <div class="container">
    <div class="grid">
    </div>
  </div>

  <nav class="navbar fixed-bottom bg-body-tertiary" style="margin-bottom: 0px; padding: 0px 0px;">
    <div class="container-fluid navbar-bottom">
      <div class="d-flex justify-content-between align-items-center" style="width: 100%; height: 100%;">
        <div class="d-flex align-items-center" style="justify-content: flex-end; margin-left: 2%;">
          <a class="nav-link-bottom" href="#" style="justify-content: flex-start;">Termos</a>
          <a class="nav-link-bottom" href="#" style="margin-left: 30px;">Contatos</a>
          <a class="nav-link-bottom" href="#" style="margin-left: 30px; margin-right: 30px;">Sobre</a>
        </div>
        <div class="d-flex align-items-center" style="justify-content: flex-end; margin-right: 3%;">
          <a class="nav-link-bottom" href="#" style="margin-right: 2%; width: 90%;">© Copyright 2022. Todos os direitos
            reservados.</a>
          <img src="./assets/images/Logo.png" height="8%"
            style="min-height: 10px; min-width: 40px; max-height: 40px; margin-right: 20px;">
        </div>
      </div>
    </div>
  </nav>

</body>
<script>

  //#region imageDownload

      /*  !!ATENÇÃO!!
      Em relação ao download da imagem infelizmente não consegui a tempo, boa parte do site eu aprendi na hora e
      botei na pratica, por este motivo o download não consegui integrar*/

  function capturarConteudo() {
    // Verifica se a função está sendo chamada
    console.log("A função capturarConteudo() está sendo chamada!");

    // Cria um canvas a partir do elemento div
    const canvas = html2canvas(document.querySelector(".imageDownload"));

    // Converte o canvas em uma imagem PNG
    const imagemPNG = canvas.toDataURL("image/png");

    // Baixa a imagem para o computador do usuário
    downloadFile(imagemPNG, "imagem.png");
  }

  //#endregion

  //#region Imagem com zoom/video

  document.addEventListener('DOMContentLoaded', function () {
    const zoomImage = document.getElementById('zoomImage');

    let currentScale = 2;
    let targetScale = 1;
    let step = 0.01;

    function zoom() {
      if (currentScale > targetScale) {
        currentScale -= step;
        zoomImage.style.transform = `scale(${currentScale})`;
        requestAnimationFrame(zoom);
      }
    }

    zoom();
  });

  //#endregion

  //#region Modal

  // Evento de clique à imagem
  const clickableImage = document.querySelector('.clickableImage');
  clickableImage.addEventListener('click', function () {
    abrirModal();
  });

  // Evento de clique no botão para abrir o modal
  const openModalButton = document.getElementById('openModalButton');
  openModalButton.addEventListener('click', function () {
    abrirModal();
  });

  // Função para abrir o modal
  function abrirModal() {
    const modal = document.getElementById('myModal');
    const modalImage = document.getElementById('modalImage');

    modal.style.display = 'block';
    modalImage.src = './assets/images/Image3.png';

    // Evento para fechar o modal com a tecla "ESC"
    document.addEventListener('keydown', function (event) {
      if (event.key === 'Escape') {
        modal.style.display = 'none';
      }
    });
  }

  // Evento de clique para fechar o modal
  const closeButton = document.querySelector('.close');
  closeButton.addEventListener('click', function () {
    const modal = document.getElementById('myModal');
    modal.style.display = 'none';
  });

  //#endregion

  //#region Campo de texto 

  //Transforma a primeira letra digitada em maiuscula
  document.getElementById('messageInput').addEventListener('input', function () {
    this.value = this.value.charAt(0).toUpperCase() + this.value.slice(1);
  });

  //Envia um alert quando o botão é pressionado para enviar
  const sendingMessageButton = document.getElementById("sendingMessage");

  function enviarMensagem() {
    alert("Mensagem enviada!");
  }

  sendingMessageButton.addEventListener("click", enviarMensagem);


  //#endregion

  //#region Numero do CPF

  function getDigitOnlyCPF(value) {
    return value.toString().replace(/\D/g, '').substring(0, 11);
  }

  function getFormattedCPF(value) {
    if (!value) return '';

    const cpf = getDigitOnlyCPF(value);
    const firstPart = cpf.substring(0, 3);
    const secondPart = cpf.substring(3, 6);
    const thirdPart = cpf.substring(6, 9);
    const fourthPart = cpf.substring(9, 11);

    let formattedCPF = `${firstPart}.${secondPart}.${thirdPart}-${fourthPart}`;

    return formattedCPF;
  }

  document.addEventListener('DOMContentLoaded', function () {
    const cpfInput = document.getElementById('CPF');

    cpfInput.addEventListener('input', function (e) {
      const cpf = getDigitOnlyCPF(e.target.value);
      const formattedCPF = getFormattedCPF(cpf);

      e.target.value = formattedCPF;
    });
  });

  //#endregion

  //#region Numero de telefone
  function getDigitOnlyPhone(value) {
    return value.toString().replace(/\D/g, '').substring(0, 11);
  }

  function getFormattedPhone(value) {
    if (!value) return '';

    const phone = getDigitOnlyPhone(value);
    const areaCode = phone.substring(0, 2);
    const middle = phone.substring(2, 7);
    const last = phone.substring(7, 11);

    let formattedPhone = '';
    if (phone.length > 6) {
      formattedPhone = `(${areaCode}) ${middle} - ${last}`;
    } else if (phone.length > 2) {
      formattedPhone = `(${areaCode}) ${middle}`;
    } else if (phone.length > 0) {
      formattedPhone = `(${areaCode}`;
    }

    return formattedPhone;
  }

  document.addEventListener('DOMContentLoaded', function () {
    const phoneInput = document.getElementById('phoneInput');

    phoneInput.addEventListener('input', function (e) {
      const phone = getDigitOnlyPhone(e.target.value);
      const formattedPhone = getFormattedPhone(phone);

      e.target.value = formattedPhone;
    });
  });
  //#endregion

  //#region Mostra ou esconde número de telefone

  var button1Showing = false;
  var button2Showing = false;

  function clicked_on(button, element) {

    if (button === 1) {
      if (button1Showing) {
        element.innerHTML = 'Ver telefone';
        button1Showing = false;
      } else {
        element.innerHTML = '(11) 94002-8922';
        button1Showing = true;
      }
    }

    if (button === 2) {
      if (button2Showing) {
        element.innerHTML = 'Ver telefone';
        button2Showing = false;
      } else {
        element.innerHTML = '(11) 99810-5896';
        button2Showing = true;
      }
    }
  }

  //#endregion

  //#region Regra de 3

  function calcularRegraDeTres() {
    const x = parseFloat(document.querySelector("#num1").value); //60
    const y = parseFloat(document.querySelector("#num2").value); //100
    const z = parseFloat(document.querySelector("#num3").value); //30

    const resultadoCalculado = (y * z) / x;

    document.querySelector("#result").value = resultadoCalculado;
  }

  document.querySelector("#calcular").addEventListener("click", calcularRegraDeTres);

  //#endregion

</script>